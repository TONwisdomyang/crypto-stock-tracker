# 加密股票滯後效應追蹤器 PRD

## 1. 產品概述

### 1.1 產品名稱
**Crypto-Stock Lag Analysis Tracker** (加密股票滯後效應追蹤器)

### 1.2 產品定位
專為交易員設計的滯後效應分析工具，專注於分析購買加密貨幣的公司股價與其持有幣種之間的領先滯後關係，幫助交易員識別交易時機。

### 1.3 核心價值主張
- **誰先動？** 清楚識別股價與幣價的領先滯後關係
- **何時動？** 精確標示反應時間差（滯後週數）
- **如何動？** 視覺化展示同步/異步變化模式

## 2. 用戶需求分析

### 2.1 目標用戶
**主要用戶**：加密貨幣和股票交易員
- 需要快速判斷交易時機
- 關注股價與加密貨幣價格的相互影響
- 偏好簡潔直觀的數據展示

**使用場景**：
- 交易前分析：判斷股票和加密貨幣的價格聯動性
- 時機選擇：基於滯後效應決定進出場時間
- 風險控制：識別價格脫鉤風險

### 2.2 核心需求
1. **滯後關係識別**
   - 股票領先：「股票漲了，幣價會跟漲嗎？」
   - 幣價領先：「幣價漲了，股票隔天會動嗎？」
   - 同步變動：「兩者是否同時反應？」

2. **時間精度要求**
   - 週級數據分析（每週一基準）
   - 只顯示已完成週期的數據
   - 不顯示未來或不完整的數據

3. **簡潔性要求**
   - 移除複雜的統計指標
   - 專注於價格變化關係
   - 直觀的視覺化展示

## 3. 功能需求

### 3.1 核心功能模組

#### 3.1.1 股票選擇模組
**功能描述**：選擇要分析的加密貨幣相關股票
- 支援股票列表：MSTR, BNC, SBET, DFDV, VERB, HYPD
- 顯示股票代碼和對應的加密貨幣
- 一鍵切換分析標的

**驗收標準**：
- ✅ 點擊股票按鈕立即切換分析對象
- ✅ 清楚顯示股票 vs 加密貨幣配對關係
- ✅ 當前選中狀態明確標示

#### 3.1.2 滯後效應分析引擎
**功能描述**：檢測並分類股價與幣價的相互關係

**分析邏輯**：
```
1. 顯著變化檢測：週環比變化 ≥ 2% 才算顯著
2. 同步性判定：同週內兩者都有顯著變化且方向一致
3. 滯後關係檢測：
   - 股票領先：股票先變化，幣價後跟隨
   - 幣價領先：幣價先變化，股票後跟隨
   - 滯後週數：反應時間差（1-4週內）
4. 關係分類：stock_leads, crypto_leads, synchronous, no_relation
```

**驗收標準**：
- ✅ 準確檢測 2% 以上的顯著價格變化
- ✅ 正確識別同步/滯後關係
- ✅ 滯後週數計算準確（最多4週）

#### 3.1.3 雙軸時間序列圖表
**功能描述**：視覺化展示股價與幣價的週環比變化

**圖表規格**：
- X軸：週期範圍（格式：6/2 ~ 6/8）
- Y軸：價格變化百分比
- 股票線：綠色實線，粗度3px
- 幣價線：藍色虛線，粗度3px
- 基準線：0%水平參考線
- Tooltip：懸停顯示詳細數據和滯後關係

**驗收標準**：
- ✅ 週期格式正確顯示（非W32格式）
- ✅ 雙軸數據對應準確
- ✅ 互動效果流暢（懸停、點擊）
- ✅ 響應式設計適配不同設備

#### 3.1.4 滯後事件記錄
**功能描述**：記錄和展示近期的滯後效應事件

**展示內容**：
- 事件發生週期
- 滯後類型和描述
- 具體的價格變化數據
- 最近5個事件的歷史記錄

**驗收標準**：
- ✅ 事件記錄準確完整
- ✅ 按時間倒序排列
- ✅ 描述清晰易懂

### 3.2 數據需求

#### 3.2.1 數據來源
- **股票數據**：Yahoo Finance API
- **加密貨幣數據**：CoinGecko API
- **數據頻率**：每週一 08:00 AM UTC+8 基準價格

#### 3.2.2 數據結構
```json
{
  "weeklyData": [
    {
      "week": "6/2 ~ 6/8",
      "date": "2025-06-02",
      "stockPrice": 150.25,
      "cryptoPrice": 45000.50,
      "stockChange": 3.5,
      "cryptoChange": 1.2,
      "lagRelationship": {
        "type": "stock_leads",
        "lagWeeks": 1,
        "strength": "moderate"
      }
    }
  ],
  "lagEvents": [
    {
      "week": "6/2 ~ 6/8",
      "type": "stock_leads",
      "lagWeeks": 1,
      "description": "📈 股票領先 1週",
      "stockChange": 3.5,
      "cryptoChange": 1.2
    }
  ]
}
```

#### 3.2.3 數據完整性要求
- **時間範圍**：2025年6月至當前（已完成週期）
- **數據驗證**：只顯示週期結束後的完整數據
- **異常處理**：缺失數據跳過，不影響整體分析

## 4. 非功能性需求

### 4.1 性能要求
- **載入時間**：首頁載入 < 3秒
- **圖表渲染**：數據切換 < 1秒
- **響應時間**：用戶操作響應 < 500ms

### 4.2 可用性要求
- **直觀性**：交易員無需培訓即可使用
- **簡潔性**：移除所有非必要的複雜指標
- **清晰性**：關鍵資訊一目了然

### 4.3 兼容性要求
- **桌面端**：Chrome, Firefox, Safari, Edge (最新2個版本)
- **響應式設計**：支援1920x1080, 1366x768, 1024x768解析度

## 5. 技術架構

### 5.1 技術棧
```
前端：Next.js 15.4.5 + TypeScript + Tailwind CSS
圖表：Recharts
數據處理：原生JavaScript/TypeScript
部署：Cloudflare Pages
```

### 5.2 關鍵組件
```
LagAnalysisDashboard.tsx     // 主儀表板
├── StockSelector            // 股票選擇器
├── LagAnalysisChart         // 雙軸時間序列圖
├── LagEventsList           // 滯後事件列表
└── DataProcessor           // 數據處理邏輯
```

### 5.3 數據流
```
原始API數據 → 完整性驗證 → 滯後關係檢測 → 視覺化展示 → 用戶互動
```

## 6. 用戶體驗設計

### 6.1 界面佈局
```
┌────────────────────────────────────────────────────────────┐
│                    🎯 滯後效應追蹤器                         │
├─────────────────┬──────────────────────────────────────────┤
│  📋 股票選擇      │  📈 雙軸滯後效應圖表                       │
│  ┌─────────────┐ │  ┌────────────────────────────────────┐   │
│  │MSTR vs BTC │ │  │     股價 vs 幣價變化對比圖            │   │
│  │BNC vs BNB  │ │  │   (週環比百分比變化)                │   │
│  │SBET vs ETH │ │  │                                   │   │
│  └─────────────┘ │  └────────────────────────────────────┘   │
│                 │                                         │
│  📊 滯後事件列表   │  📍 圖例說明                             │
│  ┌─────────────┐ │  ┌────────────────────────────────────┐   │
│  │6/2~6/8     │ │  │ —— 股價變化 (綠色實線)              │   │
│  │📈 股票領先1週│ │  │ --- 幣價變化 (藍色虛線)             │   │
│  │股:+3.5% 幣:+1.2%│ │                                   │   │
│  └─────────────┘ │  └────────────────────────────────────┘   │
└─────────────────┴──────────────────────────────────────────┘
```

### 6.2 視覺設計原則
- **色彩編碼**：
  - 🟢 綠色：股票價格變化（上漲為正，下跌為負）
  - 🔵 藍色：加密貨幣價格變化
  - 🟨 黃色：重要提示和警告
  - ⚫ 灰色：中性資訊和輔助文字

- **字體層級**：
  - H1: 主標題 (24px, Bold)
  - H2: 區塊標題 (18px, Semibold)
  - Body: 正文內容 (14px, Regular)
  - Caption: 輔助說明 (12px, Regular)

### 6.3 互動設計
- **懸停效果**：圖表點懸停顯示詳細數據
- **點擊切換**：股票按鈕點擊切換分析對象
- **實時反饋**：載入狀態和錯誤提示
- **鍵盤支援**：方向鍵切換股票選擇

## 7. 測試計劃

### 7.1 功能測試
- [ ] 股票選擇功能正常
- [ ] 滯後關係檢測準確
- [ ] 圖表渲染正確
- [ ] 數據過濾有效（只顯示已完成週期）
- [ ] 響應式佈局適配

### 7.2 性能測試
- [ ] 10週數據載入時間 < 3秒
- [ ] 股票切換響應時間 < 1秒
- [ ] 圖表互動流暢度測試

### 7.3 用戶體驗測試
- [ ] 交易員用戶可用性測試
- [ ] 滯後關係理解度測試
- [ ] 界面直觀性驗證

## 8. 發布計劃

### 8.1 版本規劃
**V1.0 (MVP)**：
- ✅ 基礎滯後效應分析
- ✅ 6個主要股票支援
- ✅ 雙軸時間序列圖表
- ✅ 已完成週期數據過濾

**V1.1 (優化版)**：
- [ ] 更多股票標的
- [ ] 滯後強度量化指標
- [ ] 交易提醒功能
- [ ] 歷史回測功能

### 8.2 發布標準
- [ ] 所有核心功能測試通過
- [ ] 性能指標達標
- [ ] 用戶驗收測試合格
- [ ] 部署環境穩定

## 9. 成功指標

### 9.1 產品指標
- **準確性**：滯後關係檢測準確率 > 85%
- **性能**：頁面載入時間 < 3秒
- **穩定性**：系統正常運行時間 > 99%

### 9.2 用戶指標
- **易用性**：用戶無需說明書即可完成基本操作
- **效用性**：用戶能夠基於分析結果做出交易決策
- **滿意度**：用戶反饋整體滿意度 > 8/10

### 9.3 技術指標
- **代碼品質**：TypeScript編譯無錯誤
- **測試覆蓋率**：核心功能測試覆蓋率 > 80%
- **部署成功率**：自動部署成功率 > 95%

## 10. 風險與限制

### 10.1 技術風險
- **API限制**：第三方數據源可能有頻率限制
- **數據準確性**：依賴外部API的數據品質
- **時區處理**：跨時區數據同步複雜性

### 10.2 產品風險
- **市場變化**：加密貨幣市場波動可能影響分析有效性
- **法規風險**：相關金融法規變化可能影響產品使用
- **競爭風險**：類似產品可能快速進入市場

### 10.3 緩解措施
- **多重數據源**：準備備用API以防主要數據源失效
- **數據驗證**：實施多層數據驗證機制
- **用戶教育**：提供清晰的使用說明和風險提示

---

**文件版本**：V1.0
**最後更新**：2025-08-08
**負責人**：產品開發團隊