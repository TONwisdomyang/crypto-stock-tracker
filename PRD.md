# Product Requirements Document (PRD)
## Crypto-Stock Correlation Tracker

---

## 📋 Executive Summary

### Product Vision
創建一個以週為單位追蹤購買虛擬貨幣策略股票的分析平台，透過週一基準對比系統，幫助投資者分析股價與加密貨幣價格之間的因果關係和脫鉤現象。

### Business Objectives
- 提供股價-幣價相關性的即時追蹤分析
- 建立標準化的週一基準對比系統 (UTC+8 08:00)
- 識別股價與幣價的脫鉤和同步現象
- 為投資決策提供數據支撐和視覺化洞察

---

## 👥 Target Users

### Primary Users: 加密貨幣投資者
- **特徵**: 關注crypto-related股票的投資者
- **需求**: 了解股價與底層加密貨幣的相關性
- **使用場景**: 投資決策前的相關性分析

### Secondary Users: 量化分析師
- **特徵**: 專業的金融數據分析人員
- **需求**: 歷史數據回測和趨勢分析
- **使用場景**: 策略研發和風險評估

---

## 🎯 Core Problems Solved

### 1. 相關性分析困難
**問題**: 投資者難以直觀比較股價與加密貨幣的表現關係
**解決方案**: 統一的週一基準對比圖表系統

### 2. 脫鉤現象識別
**問題**: 無法快速識別股價與幣價的脫鉤時機
**解決方案**: 實時的漲跌幅對比和視覺化警示

### 3. 歷史數據缺失
**問題**: 缺乏標準化的歷史基準數據
**解決方案**: 自動化的歷史數據收集和回溯系統

---

## ⚙️ Functional Requirements

### 1. 核心數據追蹤功能

#### 1.1 股票-加密貨幣配對管理
- **必須支援的配對**:
  - MSTR (Strategy Inc.) ↔ BTC (Bitcoin)
  - SBET (SharpLink Gaming) ↔ ETH (Ethereum)
  - BNC (BNB Network Company) ↔ BNB (Binance Coin)
  - DFDV (DeFi Development Corp) ↔ SOL (Solana)
  - HYPD (Hyperion DeFi) ↔ HYPE (Hyperliquid)
  - VERB (VERB Technology) ↔ TON (Toncoin)

- **配對管理**:
  - 支援新配對的動態添加
  - 配對關係的編輯和刪除
  - 配對有效性驗證

#### 1.2 數據收集系統
- **股票數據**: Yahoo Finance API 整合
- **加密貨幣數據**: CoinGecko API 整合
- **更新頻率**: 實時價格 + 週一基準數據
- **數據驗證**: API 錯誤處理和數據完整性檢查

### 2. 週一基準對比系統

#### 2.1 基準時間定義
- **基準點**: 每週一 08:00 (UTC+8 台北時間)
- **基準邏輯**: 以週一開盤價格為 100% 基準點
- **比較方式**: 計算相對於基準點的百分比變化

#### 2.2 歷史數據管理
- **回溯期間**: 最少2個月歷史數據
- **數據結構**: 週為單位的基準價格記錄
- **數據補全**: 缺失數據的智能填補機制

### 3. 相關性分析功能

#### 3.1 脫鉤現象檢測
- **同步上漲**: 股價+幣價雙向上漲，標示綠色
- **同步下跌**: 股價+幣價雙向下跌，標示紅色  
- **脫鉤上漲**: 一方上漲一方下跌，標示黃色警示
- **幅度對比**: 顯示漲跌幅度差異百分比

#### 3.2 因果關係分析
- **滯後分析**: 檢測股價對幣價的延遲反應
- **相關性係數**: 計算價格變動的統計相關性
- **趨勢預測**: 基於歷史數據的趨勢分析

---

## 🖥️ User Interface Requirements

### 1. 主要數據表格 (優化重點)
- **必須移除**: 持幣量、持幣價值欄位 (數據不準確)
- **核心欄位**:
  - 公司名稱 + 股票代號
  - 當前股價 + 股價變化%
  - 對應加密貨幣 + 幣價 + 幣價變化%
- **視覺化**: 漲跌顏色編碼，脫鉤現象警示

### 2. 週一基準對照圖
- **圖表類型**: 多線圖 (Line Chart)
- **X軸**: 週次 (Week)
- **Y軸**: 相對基準點變化百分比
- **線條設計**: 
  - 實線: 加密貨幣價格變化
  - 虛線: 股價變化
  - 顏色: 不同配對使用不同顏色

### 3. 響應式設計
- **桌面**: 完整功能展示
- **行動裝置**: 核心功能保留，表格滾動優化
- **暗色主題**: 專業的財經界面風格

---

## 🔧 Technical Requirements

### 1. 前端技術棧
- **框架**: Next.js 15.4.5 (React)
- **樣式**: Tailwind CSS
- **圖表**: Recharts 圖表庫
- **語言**: TypeScript

### 2. 後端數據處理
- **ETL Pipeline**: Python 腳本
- **數據源**: Yahoo Finance + CoinGecko
- **存儲**: JSON 文件 (靜態部署)
- **錯誤處理**: API限制和網路錯誤的重試機制

### 3. 自動化部署
- **CI/CD**: GitHub Actions
- **觸發器**: 每週一 UTC 00:00 (對應台北時間 08:00)
- **部署平台**: Cloudflare Pages
- **版本控制**: Git 自動提交數據更新

---

## 📊 Success Metrics

### 1. 數據品質指標
- **數據完整性**: >95% 成功數據收集率
- **更新及時性**: 週一基準數據準時更新率
- **API可靠性**: <5% API調用失敗率

### 2. 用戶體驗指標
- **載入速度**: 首頁載入時間 <3秒
- **視覺清晰度**: 脫鉤現象識別準確率
- **歷史數據覆蓋**: 100% 的2個月回溯數據

### 3. 功能使用指標
- **相關性分析**: 用戶能成功識別股價-幣價關係
- **趨勢預測**: 基於歷史數據的趨勢分析準確性
- **決策支援**: 用戶投資決策的數據支撐有效性

---

## 🚀 Release Plan

### Phase 1: 核心功能 (✅ 已完成)
- [x] 基礎股票-加密貨幣數據收集
- [x] 週一基準對比系統
- [x] 主要數據表格優化
- [x] 基準對照圖實現

### Phase 2: 數據增強 (進行中)
- [x] 移除不準確的持幣量數據
- [x] 股票代號驗證和修正
- [x] 歷史數據回溯完善
- [ ] API錯誤處理優化

### Phase 3: 分析增強 (計劃中)
- [ ] 持幣量真實數據整合
- [ ] 市場佔有率分析 (公司持幣量/總供應量)
- [ ] 前十大持有公司排名
- [ ] 相關性統計指標

### Phase 4: 用戶體驗 (未來)
- [ ] 個人化投資組合追蹤
- [ ] 警示通知系統 (脫鉤警報)
- [ ] 移動端 App 開發
- [ ] 多語言支援

---

## 🔒 Risk Management

### 1. 技術風險
- **API限制**: CoinGecko免費版本的請求限制
- **數據準確性**: 第三方API數據的可靠性問題
- **服務中斷**: 外部API服務不可用的應急方案

### 2. 業務風險
- **法規變化**: 金融數據使用的法規限制
- **市場波動**: 極端市場條件下的數據異常
- **競品出現**: 類似功能產品的競爭壓力

### 3. 緩解方案
- **多數據源**: 備用API服務整合
- **緩存策略**: 離線數據備份機制
- **監控系統**: 自動化的系統健康檢查

---

## 📋 Acceptance Criteria

### 功能驗收標準

#### 1. 數據準確性
- [ ] 所有股票代號對應正確的公司
- [ ] 加密貨幣價格與官方數據一致性 >99%
- [ ] 週一基準時間準確 (UTC+8 08:00)

#### 2. 用戶界面
- [ ] 主要數據表格不包含持幣量/持幣價值欄位
- [ ] 基準對照圖正確顯示實線(幣)虛線(股)
- [ ] 脫鉤現象的顏色警示正常工作

#### 3. 系統性能
- [ ] 頁面載入時間 <3秒
- [ ] ETL pipeline 執行成功率 >95%
- [ ] 自動化部署無錯誤

#### 4. 數據覆蓋
- [ ] 2個月歷史基準數據完整
- [ ] 所有配對的價格數據更新正常
- [ ] 週一自動數據收集運行正常

---

*文件版本: v1.0*  
*最後更新: 2025-08-07*  
*作者: AI Assistant (Claude) + User Requirements*